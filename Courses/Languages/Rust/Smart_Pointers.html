<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"/> <meta name="viewport" content="width=device-width,initial-scale=1"/> <title>Smart Pointers</title> <link rel="stylesheet" href="https://grimoire.quantinium.dev/static/styles.css"/> <link rel="icon" href="/static/pfp.svg"/> <meta property="og:site_name" content="Quantinium"/> <meta property="og:title" content="Smart Pointers"/> <meta property="og:type" content="website"/> <meta name="twitter:card" content="summary_large_image"/> <meta name="twitter:title" content="Smart Pointers"/> <meta name="og:url" content="https://grimoire.quantinium.dev/Courses/Languages/Rust/Smart_Pointers.md"/> <meta name="twitter:url" content="https://grimoire.quantinium.dev/Courses/Languages/Rust/Smart_Pointers.md"/> <meta name="generator" content="grimoire"/> <meta name="twitter:domain" content="https://grimoire.quantinium.dev/"/> <meta property="og:type" content="article"/> <link rel="canonical" href="https://grimoire.quantinium.dev/Courses/Languages/Rust/Smart_Pointers.html"/> <meta property="og:url" content="https://grimoire.quantinium.dev/Courses/Languages/Rust/Smart_Pointers.html"/> <meta property="og:image:type" content="image/png"/> <meta property="og:image:alt" content="Smart Pointers"/> <meta property="og:image:url" content="https://grimoire.quantinium.dev/static/smart_pointers.md168055-og.png"/> <meta property="og:image" content="https://grimoire.quantinium.dev/static/smart_pointers.md168055-og.png"/> <meta property="og:image:width" content="1200"/> <meta property="og:image:height" content="630"/> <meta name="twitter:image" content="https://grimoire.quantinium.dev/static/smart_pointers.md168055-og.png"/> <script src="https://cdn.jsdelivr.net/npm/fuse.js@7.1.0"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js" integrity="sha512-GsLlZN/3F2ErC5ifS5QtgpiJtWd43JWSuIgh7mbzZ8zBps+dvLusV+eNQATqgA/HdeKFVgA5v3S/cIrLF7QnIg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script> <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/@phosphor-icons/web@2.1.1/src/regular/style.css"/> <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/@phosphor-icons/web@2.1.1/src/fill/style.css"/> </head> <body> <div class="container"> <div class="sidebar"> <div class="sidebar-inner"> <h1 class="owner"><a href="/">Quantinium</a></h1> <div class="sidebar-theme-toggle"> <button class="theme-toggle" onclick="toggleTheme(!0)" aria-label="Toggle Theme"> <i class="ph ph-sun"></i> </button> <button class="search-button" onclick="openSearch()" aria-label="Open Search"> <i class="ph ph-magnifying-glass"></i> </button> <button class="pdf-button" onclick="printPage()" aria-label="Print Page"> <i class="ph ph-file-pdf"></i> </button> </div> <div id="file-tree" class="file-tree"></div> <div class="divider" draggable="true"></div> </div> </div> <div class="content" role="main"> <nav class="top-navbar"> <div class="top-navbar-left"> <button class="sidebar-toggle" onclick="toggleNav()" aria-label="Toggle Sidebar"> <i class="ph ph-list"></i> </button> <img class="profile-picture" src="/static/pfp.svg" alt="pfp"/> <a href="/">Quantinium</a> </div> <div class="top-navbar-right"> <button class="search-button" onclick="openSearch()" aria-label="Open Search"> <i class="ph ph-magnifying-glass"></i> </button> <button class="theme-toggle" onclick="toggleTheme(!0)" aria-label="Toggle Theme"> <i class="ph ph-sun"></i> </button> <button class="pdf-button" onclick="printPage()" aria-label="Print Page"> <i class="ph ph-file-pdf"></i> </button> </div> </nav> <div class="content-container"> <div class="content-container-inner"> <div class="page-content"> <h1>Smart Pointers</h1> <article class="markdown-content"> <p>A pointer is a general concept for a variable that contains an address in memory. This address refers to, or "points at", some other data.</p> <p>Smart Pointer on the other hand, are data structures that act like a pointer but also have additional metadata and capabilities. <code>String</code> and <code>vec&#x3C;T></code> are also smart pointers. Smart pointers are usually implemented using structs. Unlike ordinary structs, smart pointers implement the <code>Deref</code> and <code>Drop</code> traits. The <code>Deref</code> trait allows an instance of smart pointer struct to behave like reference. The <code>Drop</code> trait allows you to customize the code that's run when an instance of the smart pointer goes out of scope.</p> <p>The most common smart pointers in std library are -</p> <ul> <li><code>Box&#x3C;T></code> for allocating values on the heap.</li> <li><code>Rc&#x3C;T></code>, a references counting type that enables multiple ownership.</li> <li><code>Ref&#x3C;T></code> and <code>RefMut&#x3C;T></code>, accessed through <code>RefCell&#x3C;T></code> a type that enforces the borrowing rules at runtime instead of compile time.</li> </ul> <h2 id="using-"><strong>USING <code>Box&#x3C;T></code> to point to Data on the heap</strong></h2> <p>Boxes allow you to store data on the heap rather than the stack. What remains on the stack is the pointer to the heap data.</p> <p>We'll use them in situations such as -</p> <ul> <li>When you have a type whose size can’t be known at compile time and you want to use a value of that type in a context that requires an exact size</li> <li>When you have a large amount of data and you want to transfer ownership but ensure the data won’t be copied when you do so.</li> <li>When you want to own a value and you care only that it’s a type that implements a particular trait rather than being of a specific type</li> </ul> <h3 id="using-a-"><strong>Using a <code>Box&#x3C;T></code> to store data on the heap</strong></h3> <pre class="language-rust"><code class="language-rust code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2">    <span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token class-name">Box</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Store the value 5 on the heap</span>
</span><span class="code-line line-number" line="3">    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"b = {}"</span><span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Dereference the box to access the value</span>
</span><span class="code-line line-number" line="4"><span class="token punctuation">}</span>
</span></code></pre> <ul> <li><code>Box::new(5)</code> allocates memory on the heap to store the value 5.</li> <li>The variable b is a <code>Box&#x3C;i32></code> that points to this heap-allocated value.</li> <li>When you print <code>b</code>, Rust automatically dereferences the box to access the value inside.</li> </ul> <h3 id="enabling-recursive-types-with-boxes"><strong>Enabling recursive types with boxes</strong></h3> <p>Rust needs to know the size of types at compile time, but recursive types (like linked lists or trees) have an indeterminate size. <code>Box&#x3C;T></code> can be used to create recursive types by storing the recursive part on the heap.</p> <pre class="language-rust"><code class="language-rust code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">enum</span> <span class="token type-definition class-name">List</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2">    <span class="token class-name">Cons</span><span class="token punctuation">(</span><span class="token keyword">i32</span><span class="token punctuation">,</span> <span class="token class-name">Box</span><span class="token operator">&#x3C;</span><span class="token class-name">List</span><span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// Recursive part is boxed</span>
</span><span class="code-line line-number" line="3">    <span class="token class-name">Nil</span><span class="token punctuation">,</span> <span class="token comment">// Base case</span>
</span><span class="code-line line-number" line="4"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="5">
</span><span class="code-line line-number" line="6"><span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="7">    <span class="token keyword">let</span> list <span class="token operator">=</span> <span class="token class-name">List</span><span class="token punctuation">::</span><span class="token class-name">Cons</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token class-name">Box</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token punctuation">::</span><span class="token class-name">Cons</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token class-name">Box</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token punctuation">::</span><span class="token class-name">Nil</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="8"><span class="token punctuation">}</span>
</span></code></pre> <p><code>Box&#x3C;List></code> allows the <code>Cons</code> variant to hold another <code>List</code> without causing infinite size issues as rust knows the size of a pointer and it doesn't change based on the amount of data it's pointing to.</p> <p>The <code>Cons</code> variant needs the size of an <code>i32</code> plus the space to store the box’s pointer data. The <code>Nil</code> variant stores no values, so it needs less space than the <code>Cons</code> variant. We now know that any <code>List</code> value will take up the size of an <code>i32</code> plus the size of a box’s pointer data. By using a <code>box</code>, we’ve broken the infinite, recursive chain, so the compiler can figure out the size it needs to store a <code>List</code> value.</p> <p><img src="/static/Pasted-image-20250226131333.png" alt="Pasted-image-20250226131333"></p> <p>Boxes provide only the indirection and heap allocation; they don’t have any other special capabilities.They also don’t have the performance overhead that these special capabilities incur, so they can be useful in cases like the cons list where the indirection is the only feature we need.</p> <p>The <code>Box&#x3C;T></code> type is a smart pointer because it implements the <code>Deref</code> trait, which allows <code>Box&#x3C;T></code> values to be treated like references. When a <code>Box&#x3C;T></code> value goes out of scope, the heap data that the box is pointing to is cleaned up as well because of the <code>Drop</code> trait implementation.</p> <h2 id="treating-smart-pointers-like-regular-references-with-the-"><strong>Treating Smart Pointers Like Regular References with the <code>Deref</code> Trait</strong></h2> <p>Implementing the <code>Deref</code> trait allows you to customize the behaviour of the dereference operator <code>*</code>. By implementing <code>Deref</code> lets us to write code that operates on references and use that code with smart pointers too.</p> <h3 id="references"><strong>References</strong></h3> <p>The variable <code>x</code> holds value <code>5</code> and the variable <code>y</code> stores the address of <code>x</code>. Therefore when we dereference <code>y</code> we get the value stored at address <code>x</code> i.e. 5.</p> <pre class="language-rust"><code class="language-rust code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2">    <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="3">    <span class="token keyword">let</span> y <span class="token operator">=</span> <span class="token operator">&#x26;</span>x<span class="token punctuation">;</span>
</span><span class="code-line line-number" line="4">
</span><span class="code-line line-number" line="5">    <span class="token macro property">assert_eq!</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="6">    <span class="token macro property">assert_eq!</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token operator">*</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="7"><span class="token punctuation">}</span>
</span></code></pre> <p>We can write it using <code>Box&#x3C;T></code> too cause it implements the <code>Deref</code> Trait. The main difference here is we store a copy of x in y which is stored in the heap and we can use the dereference operator to dereference it and get value of y.</p> <pre class="language-rust"><code class="language-rust code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2">    <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="3">    <span class="token keyword">let</span> y <span class="token operator">=</span> <span class="token class-name">Box</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="4">
</span><span class="code-line line-number" line="5">    <span class="token macro property">assert_eq!</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="6">    <span class="token macro property">assert_eq!</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token operator">*</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="7"><span class="token punctuation">}</span>
</span></code></pre> <h3 id="implementing-"><strong>Implementing <code>MyBox&#x3C;T></code></strong></h3> <pre class="language-rust"><code class="language-rust code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">use</span> <span class="token namespace">std<span class="token punctuation">::</span>ops<span class="token punctuation">::</span></span><span class="token class-name">Deref</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="2">
</span><span class="code-line line-number" line="3"><span class="token keyword">struct</span> <span class="token type-definition class-name">MyBox</span><span class="token operator">&#x3C;</span><span class="token class-name">T</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token class-name">T</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="4">
</span><span class="code-line line-number" line="5"><span class="token keyword">impl</span><span class="token operator">&#x3C;</span><span class="token class-name">T</span><span class="token operator">></span> <span class="token class-name">MyBox</span><span class="token operator">&#x3C;</span><span class="token class-name">T</span><span class="token operator">></span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="6">    <span class="token keyword">fn</span> <span class="token function-definition function">new</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token class-name">T</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token class-name">MyBox</span><span class="token operator">&#x3C;</span><span class="token class-name">T</span><span class="token operator">></span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="7">        <span class="token class-name">MyBox</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="8">    <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="9"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="10">
</span><span class="code-line line-number" line="11"><span class="token keyword">impl</span><span class="token operator">&#x3C;</span><span class="token class-name">T</span><span class="token operator">></span> <span class="token class-name">Deref</span> <span class="token keyword">for</span> <span class="token class-name">MyBox</span><span class="token operator">&#x3C;</span><span class="token class-name">T</span><span class="token operator">></span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="12">    <span class="token keyword">type</span> <span class="token type-definition class-name">Target</span> <span class="token operator">=</span> <span class="token class-name">T</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="13">
</span><span class="code-line line-number" line="14">    <span class="token keyword">fn</span> <span class="token function-definition function">deref</span><span class="token punctuation">(</span><span class="token operator">&#x26;</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token operator">&#x26;</span><span class="token keyword">Self</span><span class="token punctuation">::</span><span class="token class-name">Target</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="15">        <span class="token operator">&#x26;</span><span class="token keyword">self</span><span class="token punctuation">.</span><span class="token number">0</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="16">    <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="17"><span class="token punctuation">}</span>
</span></code></pre> <ol> <li> <p><strong><code>MyBox&#x3C;T></code></strong>:</p> <ul> <li>This is a tuple struct that wraps a value of type <code>T</code>. It’s similar to <code>Box&#x3C;T></code>, but it’s a custom implementation.</li> </ul> </li> <li> <p><strong><code>new</code> Constructor</strong>:</p> <ul> <li>The <code>new</code> function creates an instance of <code>MyBox</code> by wrapping the provided value <code>x</code>.</li> </ul> </li> <li> <p><strong><code>Deref</code> Implementation</strong>:</p> <ul> <li>The <code>Deref</code> trait is implemented for <code>MyBox&#x3C;T></code>.</li> <li>The <code>type Target = T;</code> line specifies that the target type for dereferencing is <code>T</code>.</li> <li>The <code>deref</code> method returns a reference to the inner value (<code>&#x26;self.0</code>).</li> </ul> </li> <li> <p><strong>Dereferencing in <code>main</code></strong>:</p> <ul> <li><code>*y</code> works because <code>MyBox&#x3C;T></code> implements the <code>Deref</code> trait. The <code>*</code> operator calls the <code>deref</code> method, which returns a reference to the inner value (<code>5</code> in this case).</li> </ul> </li> </ol> <h3 id="implicit-deref-coercions-with-functions-and-methods"><strong>Implicit Deref Coercions with Functions and Methods</strong></h3> <h4 id="what-is-deref-coercion"><strong>What is Deref Coercion?</strong></h4> <p>Deref coercion is a convenience in Rust that automatically converts a reference to a type that implements the <code>Deref</code> trait into a reference to another type. This happens when you pass a reference to a function or method, and the type of the reference doesn’t exactly match the parameter type expected by the function.</p> <p>For example:</p> <ul> <li><code>&#x26;String</code> can be automatically converted to <code>&#x26;str</code> because <code>String</code> implements the <code>Deref</code> trait to return <code>&#x26;str</code>.</li> <li>Similarly, <code>&#x26;MyBox&#x3C;String></code> can be converted to <code>&#x26;str</code> through a sequence of <code>deref</code> calls.</li> </ul> <p>When you pass a reference to a function, Rust checks if the type of the reference implements the <code>Deref</code> trait. If it does, Rust calls the <code>deref</code> method as many times as necessary to convert the reference into the type expected by the function.</p> <p>For example:</p> <ol> <li>If you pass <code>&#x26;MyBox&#x3C;String></code> to a function that expects <code>&#x26;str</code>, Rust will: <ul> <li>Call <code>deref</code> on <code>&#x26;MyBox&#x3C;String></code> to get <code>&#x26;String</code>.</li> <li>Call <code>deref</code> on <code>&#x26;String</code> to get <code>&#x26;str</code>.</li> </ul> </li> </ol> <h3 id="example-deref-coercion-in-action"><strong>Example: Deref Coercion in Action</strong></h3> <p>Let’s use the <code>MyBox&#x3C;T></code> type and the <code>hello</code> function to demonstrate deref coercion.</p> <h4 id="1-define-"><strong>1. Define <code>MyBox&#x3C;T></code> and Implement <code>Deref</code></strong></h4> <pre class="language-rust"><code class="language-rust code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">use</span> <span class="token namespace">std<span class="token punctuation">::</span>ops<span class="token punctuation">::</span></span><span class="token class-name">Deref</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="2">
</span><span class="code-line line-number" line="3"><span class="token keyword">struct</span> <span class="token type-definition class-name">MyBox</span><span class="token operator">&#x3C;</span><span class="token class-name">T</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token class-name">T</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="4">
</span><span class="code-line line-number" line="5"><span class="token keyword">impl</span><span class="token operator">&#x3C;</span><span class="token class-name">T</span><span class="token operator">></span> <span class="token class-name">MyBox</span><span class="token operator">&#x3C;</span><span class="token class-name">T</span><span class="token operator">></span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="6">    <span class="token keyword">fn</span> <span class="token function-definition function">new</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token class-name">T</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token class-name">MyBox</span><span class="token operator">&#x3C;</span><span class="token class-name">T</span><span class="token operator">></span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="7">        <span class="token class-name">MyBox</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="8">    <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="9"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="10">
</span><span class="code-line line-number" line="11"><span class="token keyword">impl</span><span class="token operator">&#x3C;</span><span class="token class-name">T</span><span class="token operator">></span> <span class="token class-name">Deref</span> <span class="token keyword">for</span> <span class="token class-name">MyBox</span><span class="token operator">&#x3C;</span><span class="token class-name">T</span><span class="token operator">></span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="12">    <span class="token keyword">type</span> <span class="token type-definition class-name">Target</span> <span class="token operator">=</span> <span class="token class-name">T</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="13">
</span><span class="code-line line-number" line="14">    <span class="token keyword">fn</span> <span class="token function-definition function">deref</span><span class="token punctuation">(</span><span class="token operator">&#x26;</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token operator">&#x26;</span><span class="token keyword">Self</span><span class="token punctuation">::</span><span class="token class-name">Target</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="15">        <span class="token operator">&#x26;</span><span class="token keyword">self</span><span class="token punctuation">.</span><span class="token number">0</span>
</span><span class="code-line line-number" line="16">    <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="17"><span class="token punctuation">}</span>
</span></code></pre> <p>Here, <code>MyBox&#x3C;T></code> is a custom smart pointer that implements the <code>Deref</code> trait. The <code>deref</code> method returns a reference to the inner value.</p> <pre class="language-rust"><code class="language-rust code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">fn</span> <span class="token function-definition function">hello</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token operator">&#x26;</span><span class="token keyword">str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2">    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Hello, {name}!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="3"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="4">
</span><span class="code-line line-number" line="5"><span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="6">    <span class="token keyword">let</span> m <span class="token operator">=</span> <span class="token class-name">MyBox</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"Rust"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="7">    <span class="token function">hello</span><span class="token punctuation">(</span><span class="token operator">&#x26;</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="8"><span class="token punctuation">}</span>
</span></code></pre> <ol> <li><code>m</code> is a <code>MyBox&#x3C;String></code> containing the string <code>"Rust"</code>.</li> <li><code>&#x26;m</code> is a reference to <code>MyBox&#x3C;String></code>.</li> <li>Rust calls <code>deref</code> on <code>&#x26;MyBox&#x3C;String></code>, which returns <code>&#x26;String</code>.</li> <li>Rust calls <code>deref</code> on <code>&#x26;String</code>, which returns <code>&#x26;str</code>.</li> <li>The <code>&#x26;str</code> matches the parameter type of the <code>hello</code> function, so the function executes successfully.</li> </ol> <p>If Rust didn’t have deref coercion, you would need to manually convert <code>&#x26;MyBox&#x3C;String></code> into <code>&#x26;str</code> using explicit dereferencing and slicing:</p> <pre class="language-rust"><code class="language-rust code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2">    <span class="token keyword">let</span> m <span class="token operator">=</span> <span class="token class-name">MyBox</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"Rust"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="3">    <span class="token function">hello</span><span class="token punctuation">(</span><span class="token operator">&#x26;</span><span class="token punctuation">(</span><span class="token operator">*</span>m<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">..</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="4"><span class="token punctuation">}</span>
</span></code></pre> <ol> <li><code>*m</code> dereferences <code>MyBox&#x3C;String></code> into <code>String</code>.</li> <li><code>&#x26;(*m)[..]</code> takes a full slice of the <code>String</code> to get <code>&#x26;str</code>.</li> </ol> <p>This is much harder to read and write compared to the version with deref coercion.</p> <h4 id="why-is-deref-coercion-useful"><strong>Why is Deref Coercion Useful?</strong></h4> <ol> <li> <p><strong>Convenience</strong>:</p> <ul> <li>You don’t need to manually add <code>&#x26;</code> and <code>*</code> operators when passing references or smart pointers to functions.</li> <li>Code becomes cleaner and easier to read.</li> </ul> </li> <li> <p><strong>Flexibility</strong>:</p> <ul> <li>You can write functions that accept <code>&#x26;str</code> and still pass <code>&#x26;String</code>, <code>&#x26;MyBox&#x3C;String></code>, or other types that implement <code>Deref&#x3C;Target = str></code>.</li> </ul> </li> <li> <p><strong>No Runtime Cost</strong>:</p> <ul> <li>Deref coercion happens at compile time, so there’s no performance penalty.</li> </ul> </li> </ol> <h3 id="deref-coercion-and-mutability">Deref Coercion and Mutability</h3> <p>Rust does deref coercion when it finds types and trait implementations in three cases:</p> <ul> <li>From <code>&#x26;T</code> to <code>&#x26;U</code> when <code>T: Deref&#x3C;Target=U></code></li> <li>From <code>&#x26;mut T</code> to <code>&#x26;mut U</code> when <code>T: DerefMut&#x3C;Target=U></code></li> <li>From <code>&#x26;mut T</code> to <code>&#x26;U</code> when <code>T: Deref&#x3C;Target=U></code></li> </ul> <blockquote> <p>immutable references will never coerce to mutable references.</p> </blockquote> <h2 id="running-code-on-cleanup-with-the-drop-trait"><strong>Running Code on Cleanup with the Drop Trait</strong></h2> <p>The <code>Drop</code> trait lets you customize what we wanna do with the smart pointer when it goes out of scope such as releasing resources.</p> <ul> <li>The <code>Drop</code> trait has a single method: <code>fn drop(&#x26;mut self)</code>.</li> <li>It is automatically called when an instance of the type is about to go out of scope.</li> </ul> <pre class="language-rust"><code class="language-rust code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">struct</span> <span class="token type-definition class-name">Resource</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2">    name<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="3"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="4">
</span><span class="code-line line-number" line="5"><span class="token keyword">impl</span> <span class="token class-name">Drop</span> <span class="token keyword">for</span> <span class="token class-name">Resource</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="6">    <span class="token keyword">fn</span> <span class="token function-definition function">drop</span><span class="token punctuation">(</span><span class="token operator">&#x26;</span><span class="token keyword">mut</span> <span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="7">        <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Dropping resource: {}"</span><span class="token punctuation">,</span> <span class="token keyword">self</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="8">    <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="9"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="10">
</span><span class="code-line line-number" line="11"><span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="12">    <span class="token keyword">let</span> _res <span class="token operator">=</span> <span class="token class-name">Resource</span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"MyResource"</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="13">    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Resource created"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="14"><span class="token punctuation">}</span> <span class="token comment">// `_res` goes out of scope here, and `drop` is called automatically</span>
</span></code></pre> <h3 id="dropping-a-value-early-with-"><strong>Dropping a value early with <code>std::mem::drop</code></strong></h3> <p><code>std::mem::drop</code> is a function in Rust's standard library that explicitly drops a value before it would naturally go out of scope. This is useful when you want to force resource cleanup at a specific point in your program.</p> <ul> <li>Moves the value into the function, consuming it.</li> <li>Calls the <code>Drop</code> trait (if implemented) for the value.</li> <li>Ensures the value is deallocated and cleaned up immediately.</li> <li>Does <strong>not</strong> require the value to be mutable.</li> </ul> <pre class="language-rust"><code class="language-rust code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">struct</span> <span class="token type-definition class-name">Resource</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2">    name<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="3"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="4">
</span><span class="code-line line-number" line="5"><span class="token keyword">impl</span> <span class="token class-name">Drop</span> <span class="token keyword">for</span> <span class="token class-name">Resource</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="6">    <span class="token keyword">fn</span> <span class="token function-definition function">drop</span><span class="token punctuation">(</span><span class="token operator">&#x26;</span><span class="token keyword">mut</span> <span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="7">        <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Dropping resource: {}"</span><span class="token punctuation">,</span> <span class="token keyword">self</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="8">    <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="9"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="10">
</span><span class="code-line line-number" line="11"><span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="12">    <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token class-name">Resource</span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"MyResource"</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="13">    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Resource created"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="14">
</span><span class="code-line line-number" line="15">    <span class="token namespace">std<span class="token punctuation">::</span>mem<span class="token punctuation">::</span></span><span class="token function">drop</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Explicitly drop `res` here</span>
</span><span class="code-line line-number" line="16">
</span><span class="code-line line-number" line="17">    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"Resource manually dropped"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="18"><span class="token punctuation">}</span> <span class="token comment">// No automatic drop since `res` is already consumed</span>
</span></code></pre> <pre class="language-text"><code class="language-text code-highlight"><span class="code-line line-number" line="1">Resource created
</span><span class="code-line line-number" line="2">Dropping resource: MyResource
</span><span class="code-line line-number" line="3">Resource manually dropped
</span></code></pre> <h2 id=""><strong><code>Rc&#x3C;T></code>, the Reference Counted Smart Pointer</strong></h2> <p><code>Rc&#x3C;T></code> (Reference Counted Smart Pointer) is a type in Rust's standard library that allows multiple ownership of a value using reference counting. It enables multiple parts of a program to share ownership of a value, and the value is only dropped when the last reference to it is gone.</p> <ol> <li><strong>Reference Counting:</strong> It keeps track of how many <code>Rc</code> instances refer to the same value.</li> <li><strong>Shared Ownership:</strong> Multiple <code>Rc&#x3C;T></code> instances can own the same value.</li> <li><strong>Immutable Borrowing:</strong> <code>Rc&#x3C;T></code> only allows shared (<code>&#x26;T</code>) access, meaning you cannot mutate the value directly.</li> <li><strong>Thread-Local:</strong> <code>Rc&#x3C;T></code> is <strong>not</strong> thread-safe. Use <code>Arc&#x3C;T></code> for multi-threading.</li> </ol> <pre class="language-rust"><code class="language-rust code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">use</span> <span class="token namespace">std<span class="token punctuation">::</span>rc<span class="token punctuation">::</span></span><span class="token class-name">Rc</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="2">
</span><span class="code-line line-number" line="3"><span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="4">    <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token class-name">Rc</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Create a reference-counted integer</span>
</span><span class="code-line line-number" line="5">    <span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token class-name">Rc</span><span class="token punctuation">::</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token operator">&#x26;</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Increase reference count</span>
</span><span class="code-line line-number" line="6">    <span class="token keyword">let</span> c <span class="token operator">=</span> <span class="token class-name">Rc</span><span class="token punctuation">::</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token operator">&#x26;</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Increase reference count</span>
</span><span class="code-line line-number" line="7">
</span><span class="code-line line-number" line="8">    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"a = {}, reference count = {}"</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> <span class="token class-name">Rc</span><span class="token punctuation">::</span><span class="token function">strong_count</span><span class="token punctuation">(</span><span class="token operator">&#x26;</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line line-number" line="9"><span class="token punctuation">}</span>
</span></code></pre> </article> </div> </div> </div> <div class="container-right"> <h3 class="table-of-content">Table of Contents</h3> <div class="container-right-inner"> <nav class="toc"><ul><ul><li class="toc-level-2"><a href="#using-">USING </a><ul><li class="toc-level-3"><a href="#using-a-">Using a </a></li><li class="toc-level-3"><a href="#enabling-recursive-types-with-boxes">Enabling recursive types with boxes</a></li></ul></li><li class="toc-level-2"><a href="#treating-smart-pointers-like-regular-references-with-the-">Treating Smart Pointers Like Regular References with the </a><ul><li class="toc-level-3"><a href="#references">References</a></li><li class="toc-level-3"><a href="#implementing-">Implementing </a></li><li class="toc-level-3"><a href="#implicit-deref-coercions-with-functions-and-methods">Implicit Deref Coercions with Functions and Methods</a><ul><li class="toc-level-4"><a href="#what-is-deref-coercion">What is Deref Coercion?</a></li></ul></li><li class="toc-level-3"><a href="#example-deref-coercion-in-action">Example: Deref Coercion in Action</a><ul><li class="toc-level-4"><a href="#1-define-">1. Define </a></li><li class="toc-level-4"><a href="#why-is-deref-coercion-useful">Why is Deref Coercion Useful?</a></li></ul></li><li class="toc-level-3"><a href="#deref-coercion-and-mutability">Deref Coercion and Mutability</a></li></ul></li><li class="toc-level-2"><a href="#running-code-on-cleanup-with-the-drop-trait">Running Code on Cleanup with the Drop Trait</a><ul><li class="toc-level-3"><a href="#dropping-a-value-early-with-">Dropping a value early with </a></li></ul></li><li class="toc-level-2"><a href="#"></a></li></ul></ul></nav> </div> </div> </div> </div> <div class="keybinding"> <ul></ul> </div> <div class="search-dialog" id="search-dialog"> <div class="search-dialog-content"> <input type="text" id="search-input" placeholder="search..." autocomplete="off"/> <button class="close-search" onclick="closeSearch()" aria-label="Close Search"><i class="ph ph-x"></i></button> <div id="search-results" class="search-results"></div> </div> </div> <script>let searchIndex=[],fuse=null,searchInitialized=!1,searchInitializing=!1,selectedResultIndex=-1,lastQuery="";function keybindingInitialize(){let n=document.querySelector(".keybinding ul");var e;n&&(n.innerHTML="",[{key:"j",desc:"Scroll down"},{key:"k",desc:"Scroll up"},{key:"gg/Home",desc:"Scroll to top"},{key:"Shift+G/End",desc:"Scroll to bottom"},{key:"Ctrl+D",desc:"Scroll half screen down"},{key:"Ctrl+U",desc:"Scroll half screen up"},{key:"Shift+T",desc:"Toggle theme"},{key:"/",desc:"Open search"},{key:"Esc",desc:"Clear focus/close help"},{key:"Shift+H",desc:"Toggle this help"}].forEach(e=>{var t=document.createElement("li");t.textContent=e.key+" - "+e.desc,n.appendChild(t)}),document.querySelector(".keybinding").classList.add("hidden"),(e=document.createElement("h4")).textContent="Keyboard Shortcuts",n.parentNode.insertBefore(e,n))}function printPage(){var e=document.querySelector(".content-container");html2pdf(e)}function debounce(t,n){let i;return function(...e){clearTimeout(i),i=setTimeout(()=>t.apply(this,e),n)}}function initializeFileTree(e){var n=document.getElementById("file-tree");if(n){let s="fileTreeExpandedState",l=new Map(JSON.parse(localStorage.getItem(s))||[]),t=document.createElement("ul");function d(n,e=""){var i=document.createElement("ul"),a=document.createElement("li");a.classList.add(n.type),i.appendChild(a);let r=e?e+"/"+n.name:n.name;if("directory"===n.type&&0<n.children.length){i=document.createElement("div"),e=(i.classList.add("directory-wrapper"),i.style.display="flex",i.style.alignItems="center",document.createElement("i")),e=(e.setAttribute("class","ph ph-caret-right directory-arrow"),i.appendChild(e),document.createElement("span"));e.setAttribute("class","dirname"),e.textContent=n.name.replaceAll("_"," ").replaceAll("-"," ").replace(".md",""),i.appendChild(e),a.appendChild(i);let t=document.createElement("ul");l.get(r)||!1?a.classList.add("open"):t.classList.add("collapsed"),n.children.forEach(e=>{e=d(e,r);t.appendChild(e)}),i.addEventListener("click",function(e){e.stopPropagation();var e=this.parentNode,t=e.classList.toggle("open");e.querySelector("ul").classList.toggle("collapsed"),l.set(r,t),localStorage.setItem(s,JSON.stringify([...l]))}),a.appendChild(t)}else"file"===n.type&&(a.textContent=n.name.replace(".md",""),a.addEventListener("click",function(e){e.stopPropagation();e=n.path.replace(/\.md$/,".html");window.location.href="/"+e}));return a}e.forEach(e=>{t.appendChild(d(e))}),n.appendChild(t)}}function toggleNav(){document.querySelector(".sidebar").classList.toggle("open")}function openSearch(){searchInitialized||searchInitializing||initializeSearch(),document.querySelector(".search-dialog").classList.add("open"),setTimeout(()=>{document.getElementById("search-input").focus()},100)}function closeSearch(){document.getElementById("search-dialog").classList.remove("open"),document.getElementById("search-input").value="",lastQuery="",selectedResultIndex=-1,document.getElementById("search-results").innerHTML=""}function toggleTheme(e=!1){let t=localStorage.getItem("theme");t||(t="dark",localStorage.setItem("theme","dark")),e&&(t="dark"===t?"light":"dark",localStorage.setItem("theme",t));e=document.body;"dark"===t?(e.classList.remove("light"),e.classList.add("dark")):"light"===t&&(e.classList.remove("dark"),e.classList.add("light"))}function initializeCopyButton(){document.querySelectorAll(".content-container-inner pre").forEach(t=>{let n=document.createElement("button");n.textContent="Copy",n.classList.add("copy-button"),n.addEventListener("click",()=>{var e=t.querySelector("code")?.textContent||t.textContent;navigator.clipboard.writeText(e).then(()=>{n.textContent="Copied!",setTimeout(()=>{n.textContent="Copy"},2e3)}).catch(e=>{console.error("Failed to copy:",e),n.textContent="Error!",setTimeout(()=>{n.textContent="Copy"},2e3)})}),t.appendChild(n)})}function toggleKeyHints(){var e=document.querySelector(".keybinding");e&&e.classList.toggle("hidden")}function extractNameFromUrl(e){return e?((e=e.split("/").filter(Boolean))[e.length-1]||"").replace(/\.html$|\.md$/,"").replace(/[-_]/g," ").replace(/\b\w/g,e=>e.toUpperCase()):"Untitled"}function updateSelectedResult(e,t){var n=document.querySelectorAll(".result-item");0!==n.length&&(selectedResultIndex=Math.max(0,Math.min(e,t-1)),n.forEach((e,t)=>{e.classList.toggle("selected",t===selectedResultIndex),t===selectedResultIndex&&e.scrollIntoView({block:"nearest",behavior:"smooth"})}))}document.addEventListener("DOMContentLoaded",async function(){try{initializeFileTree(JSON.parse('[{"name":"Cheat_Sheets","path":"Cheat_Sheets","type":"directory","children":[{"name":"ansi_color_codes.md","path":"Cheat_Sheets/ansi_color_codes.md","type":"file","children":[]},{"name":"Git.md","path":"Cheat_Sheets/Git.md","type":"file","children":[]},{"name":"ssh_android_to_pc.md","path":"Cheat_Sheets/ssh_android_to_pc.md","type":"file","children":[]}]},{"name":"Courses","path":"Courses","type":"directory","children":[{"name":"Boot_Dev","path":"Courses/Boot_Dev","type":"directory","children":[{"name":"HTTP.md","path":"Courses/Boot_Dev/HTTP.md","type":"file","children":[]}]},{"name":"CSES","path":"Courses/CSES","type":"directory","children":[{"name":"Complete_Search.md","path":"Courses/CSES/Complete_Search.md","type":"file","children":[]},{"name":"Data_Structures.md","path":"Courses/CSES/Data_Structures.md","type":"file","children":[]}]},{"name":"Data_Structures_and_algorithms","path":"Courses/Data_Structures_and_algorithms","type":"directory","children":[{"name":"backtracking.md","path":"Courses/Data_Structures_and_algorithms/backtracking.md","type":"file","children":[]},{"name":"linear_data_structure.md","path":"Courses/Data_Structures_and_algorithms/linear_data_structure.md","type":"file","children":[]},{"name":"tree.md","path":"Courses/Data_Structures_and_algorithms/tree.md","type":"file","children":[]}]},{"name":"Languages","path":"Courses/Languages","type":"directory","children":[{"name":"Go","path":"Courses/Languages/Go","type":"directory","children":[{"name":"go.md","path":"Courses/Languages/Go/go.md","type":"file","children":[]}]},{"name":"Java","path":"Courses/Languages/Java","type":"directory","children":[{"name":"Containers.md","path":"Courses/Languages/Java/Containers.md","type":"file","children":[]},{"name":"Data_Types.md","path":"Courses/Languages/Java/Data_Types.md","type":"file","children":[]},{"name":"Expression_Statements.md","path":"Courses/Languages/Java/Expression_Statements.md","type":"file","children":[]},{"name":"Garbage_Collection.md","path":"Courses/Languages/Java/Garbage_Collection.md","type":"file","children":[]},{"name":"Interfaces.md","path":"Courses/Languages/Java/Interfaces.md","type":"file","children":[]},{"name":"intro.md","path":"Courses/Languages/Java/intro.md","type":"file","children":[]},{"name":"JVM.md","path":"Courses/Languages/Java/JVM.md","type":"file","children":[]},{"name":"OOP_Concepts.md","path":"Courses/Languages/Java/OOP_Concepts.md","type":"file","children":[]},{"name":"Operators.md","path":"Courses/Languages/Java/Operators.md","type":"file","children":[]}]},{"name":"Javascript","path":"Courses/Languages/Javascript","type":"directory","children":[{"name":"javascript.md","path":"Courses/Languages/Javascript/javascript.md","type":"file","children":[]}]},{"name":"Rust","path":"Courses/Languages/Rust","type":"directory","children":[{"name":"Async.md","path":"Courses/Languages/Rust/Async.md","type":"file","children":[]},{"name":"Collections.md","path":"Courses/Languages/Rust/Collections.md","type":"file","children":[]},{"name":"Concurrency.md","path":"Courses/Languages/Rust/Concurrency.md","type":"file","children":[]},{"name":"Enums.md","path":"Courses/Languages/Rust/Enums.md","type":"file","children":[]},{"name":"Error.md","path":"Courses/Languages/Rust/Error.md","type":"file","children":[]},{"name":"Functional.md","path":"Courses/Languages/Rust/Functional.md","type":"file","children":[]},{"name":"Generics.md","path":"Courses/Languages/Rust/Generics.md","type":"file","children":[]},{"name":"lifetimes.md","path":"Courses/Languages/Rust/lifetimes.md","type":"file","children":[]},{"name":"OOP.md","path":"Courses/Languages/Rust/OOP.md","type":"file","children":[]},{"name":"Ownership.md","path":"Courses/Languages/Rust/Ownership.md","type":"file","children":[]},{"name":"Packaging.md","path":"Courses/Languages/Rust/Packaging.md","type":"file","children":[]},{"name":"Rust_Basics.md","path":"Courses/Languages/Rust/Rust_Basics.md","type":"file","children":[]},{"name":"Smart_Pointers.md","path":"Courses/Languages/Rust/Smart_Pointers.md","type":"file","children":[]},{"name":"Structs.md","path":"Courses/Languages/Rust/Structs.md","type":"file","children":[]},{"name":"Test.md","path":"Courses/Languages/Rust/Test.md","type":"file","children":[]},{"name":"Traits.md","path":"Courses/Languages/Rust/Traits.md","type":"file","children":[]}]}]},{"name":"System_Design","path":"Courses/System_Design","type":"directory","children":[{"name":"Introduction.md","path":"Courses/System_Design/Introduction.md","type":"file","children":[]}]},{"name":"Web_Dev","path":"Courses/Web_Dev","type":"directory","children":[{"name":"Redis","path":"Courses/Web_Dev/Redis","type":"directory","children":[{"name":"redis-cli.md","path":"Courses/Web_Dev/Redis/redis-cli.md","type":"file","children":[]},{"name":"redis.md","path":"Courses/Web_Dev/Redis/redis.md","type":"file","children":[]}]}]}]},{"name":"Miscellaneous","path":"Miscellaneous","type":"directory","children":[{"name":"Self-Hosting Bitwarden.md","path":"Miscellaneous/Self-Hosting Bitwarden.md","type":"file","children":[]},{"name":"The_Caret_Conundrum.md","path":"Miscellaneous/The_Caret_Conundrum.md","type":"file","children":[]}]},{"name":"University","path":"University","type":"directory","children":[{"name":"Computer_Networks","path":"University/Computer_Networks","type":"directory","children":[{"name":"Module_1","path":"University/Computer_Networks/Module_1","type":"directory","children":[{"name":"bandwidth_and_multiplexing.md","path":"University/Computer_Networks/Module_1/bandwidth_and_multiplexing.md","type":"file","children":[]},{"name":"Data.md","path":"University/Computer_Networks/Module_1/Data.md","type":"file","children":[]},{"name":"OSI_model.md","path":"University/Computer_Networks/Module_1/OSI_model.md","type":"file","children":[]},{"name":"Protocols_and_Standards.md","path":"University/Computer_Networks/Module_1/Protocols_and_Standards.md","type":"file","children":[]},{"name":"Topologies.md","path":"University/Computer_Networks/Module_1/Topologies.md","type":"file","children":[]},{"name":"Transmission_Media.md","path":"University/Computer_Networks/Module_1/Transmission_Media.md","type":"file","children":[]},{"name":"Wired_LAN.md","path":"University/Computer_Networks/Module_1/Wired_LAN.md","type":"file","children":[]},{"name":"Wireless_LAN.md","path":"University/Computer_Networks/Module_1/Wireless_LAN.md","type":"file","children":[]}]},{"name":"Module_2","path":"University/Computer_Networks/Module_2","type":"directory","children":[{"name":"Error_Detection_and_Correction.md","path":"University/Computer_Networks/Module_2/Error_Detection_and_Correction.md","type":"file","children":[]},{"name":"Flow_Control.md","path":"University/Computer_Networks/Module_2/Flow_Control.md","type":"file","children":[]},{"name":"Multiple_Access_protocols.md","path":"University/Computer_Networks/Module_2/Multiple_Access_protocols.md","type":"file","children":[]}]},{"name":"Module_3","path":"University/Computer_Networks/Module_3","type":"directory","children":[{"name":"Address_Mapping.md","path":"University/Computer_Networks/Module_3/Address_Mapping.md","type":"file","children":[]},{"name":"Congestion_Control.md","path":"University/Computer_Networks/Module_3/Congestion_Control.md","type":"file","children":[]},{"name":"Delivery.md","path":"University/Computer_Networks/Module_3/Delivery.md","type":"file","children":[]},{"name":"Process_To_Process_Delivery.md","path":"University/Computer_Networks/Module_3/Process_To_Process_Delivery.md","type":"file","children":[]},{"name":"Routing Protocols.md","path":"University/Computer_Networks/Module_3/Routing Protocols.md","type":"file","children":[]}]}]},{"name":"Data_Mining","path":"University/Data_Mining","type":"directory","children":[{"name":"Module_1","path":"University/Data_Mining/Module_1","type":"directory","children":[{"name":"Data Mining.md","path":"University/Data_Mining/Module_1/Data Mining.md","type":"file","children":[]},{"name":"Data Preprocessing.md","path":"University/Data_Mining/Module_1/Data Preprocessing.md","type":"file","children":[]},{"name":"Intro.md","path":"University/Data_Mining/Module_1/Intro.md","type":"file","children":[]},{"name":"KDD.md","path":"University/Data_Mining/Module_1/KDD.md","type":"file","children":[]},{"name":"OLAP.md","path":"University/Data_Mining/Module_1/OLAP.md","type":"file","children":[]},{"name":"WareHouse_Schema.md","path":"University/Data_Mining/Module_1/WareHouse_Schema.md","type":"file","children":[]}]},{"name":"Module_2","path":"University/Data_Mining/Module_2","type":"directory","children":[{"name":"Advanced Pattern Mining.md","path":"University/Data_Mining/Module_2/Advanced Pattern Mining.md","type":"file","children":[]},{"name":"Association Rule Mining.md","path":"University/Data_Mining/Module_2/Association Rule Mining.md","type":"file","children":[]},{"name":"Associations and Correlations.md","path":"University/Data_Mining/Module_2/Associations and Correlations.md","type":"file","children":[]},{"name":"Cluster Analysis.md","path":"University/Data_Mining/Module_2/Cluster Analysis.md","type":"file","children":[]},{"name":"Clustering with constriants.md","path":"University/Data_Mining/Module_2/Clustering with constriants.md","type":"file","children":[]},{"name":"Density Based Methods.md","path":"University/Data_Mining/Module_2/Density Based Methods.md","type":"file","children":[]},{"name":"Frequent Pattern Mining.md","path":"University/Data_Mining/Module_2/Frequent Pattern Mining.md","type":"file","children":[]},{"name":"Hierarchical Methods.md","path":"University/Data_Mining/Module_2/Hierarchical Methods.md","type":"file","children":[]},{"name":"Outlier Detection.md","path":"University/Data_Mining/Module_2/Outlier Detection.md","type":"file","children":[]},{"name":"Sequential Pattern mining.md","path":"University/Data_Mining/Module_2/Sequential Pattern mining.md","type":"file","children":[]},{"name":"Similarity and Distance Measure.md","path":"University/Data_Mining/Module_2/Similarity and Distance Measure.md","type":"file","children":[]}]},{"name":"Module_3","path":"University/Data_Mining/Module_3","type":"directory","children":[{"name":"BackPropogation_In_NL.md","path":"University/Data_Mining/Module_3/BackPropogation_In_NL.md","type":"file","children":[]},{"name":"Classification.md","path":"University/Data_Mining/Module_3/Classification.md","type":"file","children":[]},{"name":"Genetic_Algorithm.md","path":"University/Data_Mining/Module_3/Genetic_Algorithm.md","type":"file","children":[]},{"name":"Improving_Classifier_Accuracy.md","path":"University/Data_Mining/Module_3/Improving_Classifier_Accuracy.md","type":"file","children":[]},{"name":"Lazy_Learners_Rule_based_Classification_Model_Evaluation_Selection.md","path":"University/Data_Mining/Module_3/Lazy_Learners_Rule_based_Classification_Model_Evaluation_Selection.md","type":"file","children":[]},{"name":"Regression.md","path":"University/Data_Mining/Module_3/Regression.md","type":"file","children":[]},{"name":"Support_Vector_Machine.md","path":"University/Data_Mining/Module_3/Support_Vector_Machine.md","type":"file","children":[]}]},{"name":"Module_4","path":"University/Data_Mining/Module_4","type":"directory","children":[{"name":"Mining_Data_Types.md","path":"University/Data_Mining/Module_4/Mining_Data_Types.md","type":"file","children":[]},{"name":"Mining_Time_Series_Data.md","path":"University/Data_Mining/Module_4/Mining_Time_Series_Data.md","type":"file","children":[]}]}]},{"name":"Economics","path":"University/Economics","type":"directory","children":[{"name":"Module_1.md","path":"University/Economics/Module_1.md","type":"file","children":[]},{"name":"Module_3.md","path":"University/Economics/Module_3.md","type":"file","children":[]}]},{"name":"OOP","path":"University/OOP","type":"directory","children":[{"name":"Module_1","path":"University/OOP/Module_1","type":"directory","children":[{"name":"Basic_Concepts.md","path":"University/OOP/Module_1/Basic_Concepts.md","type":"file","children":[]},{"name":"Intro.md","path":"University/OOP/Module_1/Intro.md","type":"file","children":[]}]},{"name":"Module_3","path":"University/OOP/Module_3","type":"directory","children":[{"name":"Exceptions.md","path":"University/OOP/Module_3/Exceptions.md","type":"file","children":[]},{"name":"Interfaces.md","path":"University/OOP/Module_3/Interfaces.md","type":"file","children":[]},{"name":"Packages.md","path":"University/OOP/Module_3/Packages.md","type":"file","children":[]},{"name":"Threads.md","path":"University/OOP/Module_3/Threads.md","type":"file","children":[]}]},{"name":"Module_4","path":"University/OOP/Module_4","type":"directory","children":[{"name":"IO.md","path":"University/OOP/Module_4/IO.md","type":"file","children":[]},{"name":"Strings.md","path":"University/OOP/Module_4/Strings.md","type":"file","children":[]},{"name":"Swing.md","path":"University/OOP/Module_4/Swing.md","type":"file","children":[]}]},{"name":"Module_1.md","path":"University/OOP/Module_1.md","type":"file","children":[]}]}]},{"name":"index.md","path":"index.md","type":"file","children":[]}]'))}catch(e){console.error("Error parsing file tree:",e)}toggleTheme(),initializeCopyButton(),toggleKeyHints(),keybindingInitialize(),initializeSearch();var e=document.getElementById("search-input");e.addEventListener("input",handleSearch),e.addEventListener("keydown",function(e){"Escape"===e.key&&closeSearch()})}),document.getElementById("search-input").addEventListener("keydown",function(e){var t=document.querySelectorAll(".result-item");if(t.length)switch(e.key){case"ArrowDown":e.preventDefault(),updateSelectedResult(selectedResultIndex+1,t.length);break;case"ArrowUp":e.preventDefault(),updateSelectedResult(selectedResultIndex-1,t.length);break;case"Enter":e.preventDefault(),0<=selectedResultIndex&&t[selectedResultIndex].querySelector("a").click();break;case"Escape":e.preventDefault(),closeSearch()}}),document.getElementById("search-dialog").addEventListener("click",function(e){e.target===this&&closeSearch()}),document.addEventListener("keydown",function(e){if("INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&!e.target.isContentEditable){var t=e.key.toLowerCase();switch(window.lastGPress||(window.lastGPress={count:0,time:0}),t){case"j":e.preventDefault(),window.scrollBy(0,50);break;case"k":e.preventDefault(),window.scrollBy(0,-50);break;case"g":e.shiftKey?(e.preventDefault(),window.scrollTo(0,document.body.scrollHeight)):(n=Date.now())-window.lastGPress.time<500&&1===window.lastGPress.count?(e.preventDefault(),window.scrollTo(0,0),window.lastGPress.count=0):(window.lastGPress.count=1,window.lastGPress.time=n);break;case"u":e.ctrlKey&&(e.preventDefault(),window.scrollBy(0,-window.innerHeight/2));break;case"d":e.ctrlKey&&(e.preventDefault(),window.scrollBy(0,window.innerHeight/2));break;case"r":e.ctrlKey&&(e.preventDefault(),window.location.reload());break;case"/":e.preventDefault(),openSearch();break;case"escape":document.activeElement&&document.activeElement.blur();var n=document.querySelector(".keybinding");n&&!n.classList.contains("hidden")&&n.classList.add("hidden"),closeSearch();break;case"home":e.preventDefault(),window.scrollTo(0,0);break;case"end":e.preventDefault(),window.scrollTo(0,document.body.scrollHeight);break;case"h":e.shiftKey&&(e.preventDefault(),toggleKeyHints());break;case"t":e.shiftKey&&(e.preventDefault(),toggleTheme(!0))}}}),document.getElementById("search-dialog").addEventListener("click",function(e){e.target===this&&closeSearch()});let debouncedHandleSearch=debounce(function(e){let t=e.target.value.trim();var n=document.getElementById("search-results");t!==lastQuery&&((lastQuery=t)?searchInitialized?fuse&&searchIndex.length?displaySearchResults(fuse.search(t),t,n):(n.innerHTML='<p class="search-error">Search unavailable. Retrying...</p>',initializeSearch().then(()=>t&&handleSearch(e))):(n.innerHTML='<p class="search-loading">Search is initializing...</p>',searchInitializing||initializeSearch().then(()=>t&&handleSearch(e))):n.innerHTML='<p class="search-ready">Type to start searching...</p>')},300);function displaySearchResults(e,s,l){var t,n;l.innerHTML="",selectedResultIndex=-1,e.length?(t=Math.min(e.length,10),e.slice(0,t).forEach((e,t)=>{var n=e.item,e=e.matches||[],i=document.createElement("div"),t=(i.className="result-item",i.dataset.index=t,document.createElement("a")),a=(t.href=n.url,t.className="result-link",t.addEventListener("click",closeSearch),document.createElement("div")),r=(a.className="result-title",n.name||extractNameFromUrl(n.url)),r=(a.innerHTML=highlightMatch(r,e.filter(e=>"name"===e.key)),document.createElement("div"));r.className="result-snippet",r.innerHTML=n.content?generateSnippet(n.content,s):"No preview available",t.appendChild(a),t.appendChild(r),i.appendChild(t),l.appendChild(i)}),e.length>t&&((n=document.createElement("p")).className="search-show-more",n.textContent=`Showing ${t} of ${e.length} results.`,l.appendChild(n))):l.innerHTML='<p class="no-results">No results found.</p>'}function handleSearch(e){debouncedHandleSearch(e)}async function initializeSearch(){if(!searchInitializing){searchInitializing=!0;var t=document.getElementById("search-results");try{console.log("Initializing search..."),t&&(t.innerHTML='<p class="search-loading">Loading search index...</p>');var e=await fetch("/static/search-index.json");if(!e.ok)throw new Error("Failed to fetch search index: "+e.status);var n,i=await e.json();if(!Array.isArray(i))throw new Error("Invalid search index format");searchIndex=i,fuse=new Fuse(searchIndex,{keys:[{name:"name",weight:.5},{name:"content",weight:.3},{name:"tags",weight:.2}],threshold:.3,distance:200,includeScore:!0,includeMatches:!0,useExtendedSearch:!0,ignoreLocation:!1,minMatchCharLength:2,shouldSort:!0}),console.log("Search initialized with",searchIndex.length,"items"),searchInitialized=!0,t&&document.querySelector(".search-dialog").classList.contains("open")&&(t.innerHTML='<p class="search-ready">Type to start searching...</p>',(n=document.getElementById("search-input"))?.value.trim())&&handleSearch({target:n})}catch(e){console.error("Search init failed:",e),searchInitialized=!1,t&&(t.innerHTML=`
                <p class="search-error">Failed to load search: ${e.message}</p>
                <button class="retry-button" onclick="initializeSearch()">Retry</button>`)}finally{searchInitializing=!1}}}function highlightMatch(n,e){if(!e||!e.length)return n;let i=n;return e.forEach(e=>{var t=e.indices[0][0],e=e.indices[0][1]+1,t=n.slice(t,e);i=i.replace(t,`<mark>${t}</mark>`)}),i}function generateSnippet(e,t,n=100){var i=e.toLowerCase(),a=t.toLowerCase(),i=i.indexOf(a),a=Math.max(0,i-50);let r=e.slice(a,a+n);return(r=0<a?"..."+r:r).length<e.length&&(r+="..."),highlightMatch(r,[{indices:[[i-a,i-a+t.length-1]]}])}</script> </body> </html> 